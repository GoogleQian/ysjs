webpackJsonp([15],{cswl:function(e,t){},jW1Q:function(e,t){},o1jz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("Dd8w"),r=a.n(o),l=a("MEs8"),n=a("Zrlr"),s=a.n(n),i={stopTemp:[{validator:function(e,t,a){""===t?a(new Error("请输入停止加热温度")):t<20||t>99?a(new Error("停止加热温度在20~99之间")):a()},trigger:"change"}],inTemp:[{validator:function(e,t,a){""===t?a(new Error("请输入进水温差")):t<1||t>9?a(new Error("进水温差在1~9之间")):a()},trigger:"change"}],delicacy:[{validator:function(e,t,a){""===t?a(new Error("请输入水位检测灵敏度")):t<1||t>25?a(new Error("水位检测灵敏度在1~25之间")):a()},trigger:"change"}]},m=r()({},i,{keepTemp:[{validator:function(e,t,a){""===t?a(new Error("请输入保温温差")):t<0||t>9?a(new Error("保温温差在0~9之间")):a()},trigger:"change"}],keepHeight:[{validator:function(e,t,a){""===t?a(new Error("请输入保温回差")):t<2||t>9?a(new Error("保温回差在2~9之间")):a()},trigger:"change"}],speed:[{validator:function(e,t,a){""===t?a(new Error("请输入进水速度")):t<0||t>80?a(new Error("进水速度在0~80之间")):a()},trigger:"change"}]}),d=r()({},i,{inHeight:[{validator:function(e,t,a){""===t?a(new Error("请输入进水回差")):t<1||t>9?a(new Error("进水回差在1~9之间")):a()},trigger:"change"}]}),c=(a("PJh5"),{data:function(){return{sysParams:{},state:null,dataForm:new function e(){s()(this,e),this.id=null,this.state=null,this.stopTemp=null,this.flushType=null,this.filterType=null,this.logoShows=null,this.inTemp=null,this.delicacy=null,this.emptyType=null,this.keepTemp=null,this.keepHeight=null,this.speed=null,this.addTemp=null,this.addAmount=null,this.showTemp=null,this.outType=null,this.changeType=null,this.inHeight=null,this.changeMethod=null,this.checkWater=null},rules:{},edit:!1,submiting:!1,resetData:{},type:{type:null}}},created:function(){var e=this;this.getModel(),setTimeout(function(){e.getSysParams()},1e3)},methods:{getModel:function(){var e=this;Object(l.c)({devId:this.$route.query.id}).then(function(t){0===t.data.ret?e.state=t.data.datas.type:e.$alert(t.data.msg,"提示",{confirmButtonText:"确定",type:"error"})})},getSysParams:function(){var e=this;Object(l.d)({devId:this.$route.query.id,state:this.state}).then(function(t){console.log(t),0===t.data.ret?(e.dataForm=t.data.datas,e.resetData=r()({},e.dataForm),0===t.data.datas.state?e.rules=m:e.rules=d):e.$message({message:t.data.msg,type:"error"})})},setSysParams:function(){var e=this;this.submiting=!0,Object(l.k)(r()({},this.dataForm,{type:this.getChangeType().join(",")})).then(function(t){e.submiting=!1,0===t.data.ret?(e.$alert("下发成功","提示",{confirmButtonText:"确定",type:"success"}),e.edit=!1):1115===t.data.ret?(e.dataForm=r()({},e.resetData),e.$alert(t.data.msg,"提示",{confirmButtonText:"确定",type:"error"})):e.$alert(t.data.msg,"提示",{confirmButtonText:"确定",type:"error"})}).catch(function(){e.submiting=!1,e.$alert("请求出错","提示",{confirmButtonText:"确定",type:"error"})})},doCommand:function(e){console.log(e)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(console.log(t.dataForm),!e)return console.log("error submit!!"),!1;t.setSysParams(),t.resetData=r()({},t.dataForm)})},getChangeType:function(){var e=[];for(var t in this.resetData)this.dataForm[t]!==this.resetData[t]&&e.push(t);return e}}}),p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sys-set"},[a("div",{staticStyle:{"padding-bottom":"10px","border-bottom":"1px solid #eaeaea","margin-bottom":"20px"}},[e._v("\n        设备类型："+e._s(0===e.dataForm.state?"步进":"节能")+"\n        ")]),e._v(" "),a("el-form",{ref:"dataForm",staticClass:"demo-dataForm",attrs:{model:e.dataForm,rules:e.rules,"label-width":"130px"}},[a("el-row",[a("el-col",{attrs:{xs:24,md:8}},[a("el-form-item",{attrs:{label:"最近一次下发时间：",prop:"sendTime","label-width":"200px"}},[e._v("\n                    "+e._s(e._f("dateFormat")(e.dataForm.sendTime))+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{xs:24,md:8}},[a("el-form-item",{attrs:{label:"最近一次上报时间：",prop:"reportTime","label-width":"200px"}},[e._v("\n                    "+e._s(e._f("dateFormat")(e.dataForm.reportTime))+"\n                ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{xs:24,md:6}},[a("el-form-item",{attrs:{label:"停止加热温度：",prop:"stopTemp"}},[a("el-input",{on:{blur:function(t){e.doCommand({type:"停止加热温度"})}},model:{value:e.dataForm.stopTemp,callback:function(t){e.$set(e.dataForm,"stopTemp",e._n(t))},expression:"dataForm.stopTemp"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,md:6}},[a("el-form-item",{attrs:{label:"自动清洗：",prop:"flushType"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){e.doCommand({type:"自动清洗"})}},model:{value:e.dataForm.flushType,callback:function(t){e.$set(e.dataForm,"flushType",t)},expression:"dataForm.flushType"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,md:6}},[a("el-form-item",{attrs:{label:"滤芯管理功能：",prop:"filterType"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){e.doCommand({type:"滤芯管理功能"})}},model:{value:e.dataForm.filterType,callback:function(t){e.$set(e.dataForm,"filterType",t)},expression:"dataForm.filterType"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,md:6}},[a("el-form-item",{attrs:{label:"LOGO展示：",prop:"logoShows"},on:{change:function(t){e.doCommand({type:"LOGO展示"})}}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.dataForm.logoShows,callback:function(t){e.$set(e.dataForm,"logoShows",t)},expression:"dataForm.logoShows"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{xs:24,md:6}},[a("el-form-item",{attrs:{label:"进水温差：",prop:"inTemp"},on:{blur:function(t){e.doCommand({type:"进水温差"})}}},[a("el-input",{model:{value:e.dataForm.inTemp,callback:function(t){e.$set(e.dataForm,"inTemp",e._n(t))},expression:"dataForm.inTemp"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,md:6}},[a("el-form-item",{attrs:{label:"水位检测灵敏度：",prop:"delicacy"}},[a("el-input",{on:{blur:function(t){e.doCommand({type:"水位检测灵敏度"})}},model:{value:e.dataForm.delicacy,callback:function(t){e.$set(e.dataForm,"delicacy",e._n(t))},expression:"dataForm.delicacy"}})],1)],1)],1),e._v(" "),0==e.dataForm.state?[a("el-row",[a("el-col",{attrs:{xs:24,md:6}},[a("el-form-item",{attrs:{label:"排空功能：",prop:"emptyType"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){e.doCommand({type:"排空功能"})}},model:{value:e.dataForm.emptyType,callback:function(t){e.$set(e.dataForm,"emptyType",t)},expression:"dataForm.emptyType"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,md:6}},[a("el-form-item",{attrs:{label:"保温温差：",prop:"keepTemp"}},[a("el-input",{on:{blur:function(t){e.doCommand({type:"保温温差"})}},model:{value:e.dataForm.keepTemp,callback:function(t){e.$set(e.dataForm,"keepTemp",e._n(t))},expression:"dataForm.keepTemp"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,md:6}},[a("el-form-item",{attrs:{label:"保温回差：",prop:"keepHeight"}},[a("el-input",{on:{blur:function(t){e.doCommand({type:"保温回差"})}},model:{value:e.dataForm.keepHeight,callback:function(t){e.$set(e.dataForm,"keepHeight",e._n(t))},expression:"dataForm.keepHeight"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,md:6}},[a("el-form-item",{attrs:{label:"进水速度：",prop:"speed"}},[a("el-input",{on:{blur:function(t){e.doCommand({type:"进水速度"})}},model:{value:e.dataForm.speed,callback:function(t){e.$set(e.dataForm,"speed",e._n(t))},expression:"dataForm.speed"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,md:6}},[a("el-form-item",{attrs:{label:"补水温差：",prop:"addTemp"}},[a("el-input",{on:{blur:function(t){e.doCommand({type:"补水温差"})}},model:{value:e.dataForm.addTemp,callback:function(t){e.$set(e.dataForm,"addTemp",e._n(t))},expression:"dataForm.addTemp"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,md:6}},[a("el-form-item",{attrs:{label:"补水量：",prop:"addAmount"}},[a("el-input",{on:{blur:function(t){e.doCommand({type:"补水量"})}},model:{value:e.dataForm.addAmount,callback:function(t){e.$set(e.dataForm,"addAmount",e._n(t))},expression:"dataForm.addAmount"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,md:6}},[a("el-form-item",{attrs:{label:"显示温度：",prop:"showTemp"}},[a("el-input",{on:{blur:function(t){e.doCommand({type:"显示温度"})}},model:{value:e.dataForm.showTemp,callback:function(t){e.$set(e.dataForm,"showTemp",e._n(t))},expression:"dataForm.showTemp"}})],1)],1)],1)]:e._e(),e._v(" "),1==e.dataForm.state?[a("el-row",[a("el-col",{attrs:{xs:24,md:6}},[a("el-form-item",{attrs:{label:"出水方式：",prop:"outType"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){e.doCommand({type:"出水方式"})}},model:{value:e.dataForm.outType,callback:function(t){e.$set(e.dataForm,"outType",t)},expression:"dataForm.outType"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,md:6}},[a("el-form-item",{attrs:{label:"换水功能：",prop:"changeType"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){e.doCommand({type:"换水功能"})}},model:{value:e.dataForm.changeType,callback:function(t){e.$set(e.dataForm,"changeType",t)},expression:"dataForm.changeType"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,md:6}},[a("el-form-item",{attrs:{label:"消毒功能：",prop:"disinfectType"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){e.doCommand({type:"消毒功能"})}},model:{value:e.dataForm.disinfectType,callback:function(t){e.$set(e.dataForm,"disinfectType",t)},expression:"dataForm.disinfectType"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,md:6}},[a("el-form-item",{attrs:{label:"进水回差：",prop:"inHeight"}},[a("el-input",{on:{blur:function(t){e.doCommand({type:"进水回差"})}},model:{value:e.dataForm.inHeight,callback:function(t){e.$set(e.dataForm,"inHeight",t)},expression:"dataForm.inHeight"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,md:6}},[a("el-form-item",{attrs:{label:"换水方式：",prop:"changeMethod"}},[a("el-select",{attrs:{placeholder:"换水方式"},on:{change:function(t){e.doCommand({type:"换水方式"})}},model:{value:e.dataForm.changeMethod,callback:function(t){e.$set(e.dataForm,"changeMethod",t)},expression:"dataForm.changeMethod"}},[a("el-option",{attrs:{label:"开进水阀和排水阀，从排水管排水",value:1}}),e._v(" "),a("el-option",{attrs:{label:"开进水阀和所有触摸开关，从龙头排水",value:2}}),e._v(" "),a("el-option",{attrs:{label:"排空，打开排空阀和所有触摸开关，利用空气压力慢速排水",value:3}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,md:6}},[a("el-form-item",{attrs:{label:"水位监测：",prop:"checkWater"},on:{change:function(t){e.doCommand({type:"水位监测"})}}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.dataForm.checkWater,callback:function(t){e.$set(e.dataForm,"checkWater",e._n(t))},expression:"dataForm.checkWater"}})],1)],1)],1)]:e._e(),e._v(" "),a("el-form-item",[a("el-button",{attrs:{loading:e.submiting},on:{click:function(t){e.submitForm("dataForm")}}},[e._v("保存")])],1)],2)],1)},staticRenderFns:[]};var u=a("VU/8")(c,p,!1,function(e){a("cswl"),a("jW1Q")},"data-v-751ee220",null);t.default=u.exports}});