webpackJsonp([11],{"8KiM":function(t,e,a){"use strict";e.f=function(){return Object(s.a)({url:"/dev/configs/user2",method:"get"})},e.a=function(t){var e=t.id,a=t.params;return Object(s.a)({url:"dev/configs/user/"+e,method:"get",params:a})},e.b=function(t){var e=t.id;return Object(s.a)({url:"/dev/configs/passage/"+e,method:"get"})},e.d=function(t){var e=t.id,a=t.data;return Object(s.a)({url:"/dev/configs/passages/"+e,method:"post",data:a})},e.e=function(t){var e=t.id,a=t.data;return Object(s.a)({url:"/dev/configs/passages/"+e,method:"put",data:a})},e.c=function(t){return Object(s.a)({url:"/solution/getPrice",method:"get",params:t})};var s=a("0N3M")},Av5a:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Dd8w"),n=a.n(s),r=a("8KiM"),i=a("lCCq"),c=a("oNXm"),l={data:function(){return{options:[],agent:null,pipsData:{passList:[]},saleType:[],priceTypeDialog:!1,priceType:null,priceTypes:[],sellTypes:[],sellType:null,index:null,flag:0}},created:function(){this.getPips(),this.getTypeList(),this.getSaleType()},methods:{addPip:function(t){this.pipsData.passList.push({})},removePip:function(t){this.pipsData.passList.splice(t,1)},handleClickSelect:function(t,e){var a=this;Object(r.c)({id:e.passage_type}).then(function(t){a.priceTypes=t.data.datas})},getTypeList:function(){var t=this;Object(i.a)().then(function(e){t.saleType=e.data.datas.list})},getSaleType:function(){var t=this;Object(c.d)().then(function(e){t.sellTypes=e.data.datas.list})},setType:function(t,e){var a=this;this.index=e,Object(r.c)({id:t.passage_type}).then(function(t){a.priceTypeDialog=!0,a.priceTypes=t.data.datas})},bindPriceType:function(){pipsData[this.index].str_price=this.priceType},getPips:function(){var t=this;Object(r.b)({id:this.$route.query.id}).then(function(e){0===e.data.ret&&(t.pipsData=e.data.datas,0===t.pipsData.passList.length?(t.flag=0,t.pipsData.passList.push({})):t.flag=1)})},binduser:function(){var t=this;Object(r.a)({id:this.$route.query.id,params:{userId:this.agent}}).then(function(e){0===e.data.ret&&t.$message({message:"绑定成功",type:"success"})})},setPips:function(){var t=this,e={id:this.$route.query.id,data:n()({},this.pipsData)};0===this.flag?Object(r.d)(e).then(function(e){0===e.data.ret?t.$message({message:"设置成功",type:"success"}):t.$message({message:e.data.msg,type:"error"})}):1===this.flag&&Object(r.e)(e).then(function(e){0===e.data.ret?t.$message({message:"设置成功",type:"success"}):t.$message({message:e.data.msg,type:"error"})})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manage"},[a("p",{staticStyle:{"margin-bottom":"10px"}},[t._v("\n    设备编号："+t._s(t.$route.query.device_id)+"\n  ")]),t._v(" "),a("p",{staticStyle:{margin:"10px 0","padding-top":"10px","border-top":"1px solid #eee"}}),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{"label-width":"90px"}},[a("el-form-item",{attrs:{label:"售水方案："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.pipsData.schema_id,callback:function(e){t.$set(t.pipsData,"schema_id",e)},expression:"pipsData.schema_id"}},t._l(t.sellTypes,function(t){return a("el-option",{key:t.id,attrs:{label:t.pro_name,value:t.id}})}))],1),t._v(" "),a("div",{staticStyle:{overflow:"hidden"}},[a("el-form-item",{attrs:{label:"通道设置："}})],1),t._v(" "),t._l(t.pipsData.passList,function(e,s){return a("el-row",{key:e.passage_no},[a("el-col",{attrs:{span:22}},[a("el-col",{attrs:{xs:24,md:4}},[a("el-form-item",{attrs:{label:"通道号："}},[a("el-select",{staticStyle:{width:"100px"},model:{value:e.passage_no,callback:function(a){t.$set(e,"passage_no",a)},expression:"pip.passage_no"}},[a("el-option",{attrs:{label:"1",value:1}}),t._v(" "),a("el-option",{attrs:{label:"2",value:2}}),t._v(" "),a("el-option",{attrs:{label:"3",value:3}}),t._v(" "),a("el-option",{attrs:{label:"4",value:4}}),t._v(" "),a("el-option",{attrs:{label:"5",value:5}}),t._v(" "),a("el-option",{attrs:{label:"6",value:6}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{xs:24,md:4}},[a("el-form-item",{attrs:{label:"出水类型："}},[a("el-select",{staticStyle:{width:"100px"},model:{value:e.passage_type,callback:function(a){t.$set(e,"passage_type",a)},expression:"pip.passage_type"}},t._l(t.saleType,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.type}})}))],1)],1),t._v(" "),a("el-col",{attrs:{xs:24,md:7}},[a("el-form-item",{attrs:{label:"脉冲数："}},[a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"脉冲数"},model:{value:e.pulse_num,callback:function(a){t.$set(e,"pulse_num",a)},expression:"pip.pulse_num"}}),t._v(" / 100ML\n          ")],1)],1),t._v(" "),a("el-col",{attrs:{xs:24,md:9}},[a("el-form-item",{attrs:{label:"售水价格："}},[a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"价格(元)"},model:{value:e.str_price,callback:function(a){t.$set(e,"str_price",t._n(a))},expression:"pip.str_price"}}),t._v(" 元 / 100ML\n          ")],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-col",{attrs:{xs:24,md:24}},[a("el-button",{staticStyle:{margin:"0","padding-left":"2px","padding-right":"2px"},attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(e){t.removePip(s)}}},[t._v("删除")])],1)],1)],1)}),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline"},on:{click:function(e){t.addPip()}}},[t._v("增加通道")])],1),t._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary"},on:{click:t.setPips}},[t._v("保存")])],1),t._v(" "),a("el-form-item")],2)],1)},staticRenderFns:[]};var o=a("VU/8")(l,p,!1,function(t){a("SAJN")},"data-v-a5706c40",null);e.default=o.exports},SAJN:function(t,e){},lCCq:function(t,e,a){"use strict";e.a=function(t){return Object(s.a)({url:"/waterTypes/",method:"get",params:t})};var s=a("0N3M")},oNXm:function(t,e,a){"use strict";a.d(e,"d",function(){return g}),a.d(e,"a",function(){return y}),a.d(e,"c",function(){return b}),a.d(e,"b",function(){return _});var s,n,r,i,c,l,p=a("Dd8w"),o=a.n(p),u=a("Xxa5"),d=a.n(u),f=a("exGp"),m=a.n(f),h=a("0N3M"),v=a("mw3O"),g=(s=m()(d.a.mark(function t(e){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.a)({url:"/schema/",method:"get",params:e});case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},t,this)})),function(t){return s.apply(this,arguments)}),y=(n=m()(d.a.mark(function t(e){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.a)({url:"/schema/",method:"post",data:o()({},e)});case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)}),b=(r=m()(d.a.mark(function t(e){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.a)({url:"/schema/"+e.id,method:"put",data:o()({},e)});case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)}),_=(i=m()(d.a.mark(function t(e){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.a)({url:"/schema/"+e.id,method:"delete"});case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},t,this)})),function(t){return i.apply(this,arguments)});c=m()(d.a.mark(function t(e){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.a)({url:"/agent/get_agent_list",method:"post",data:v.stringify(o()({},e))});case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},t,this)})),l=m()(d.a.mark(function t(e){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.a)({url:"/device/assignment_dev",method:"post",data:v.stringify(o()({},e))});case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},t,this)}))}});