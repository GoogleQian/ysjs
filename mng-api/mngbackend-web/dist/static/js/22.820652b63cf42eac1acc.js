webpackJsonp([22],{"6tDn":function(e,t){},i7zI:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"deptId";return e.forEach(function(a){var i=a.parentId;0===i||e.forEach(function(e){if(e[t]===i){var l=e.children;l||(l=[]),l.push(a),e.children=l}})}),e=e.filter(function(e){return 0===e.parentId})}},jxnk:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),l=a.n(i),o=a("oRRU"),r=a("i7zI"),n={data:function(){return{searchData:{},tableData:[],dialogTitle:"编辑",dialogFormVisible:!1,dialogData:{},rules:{},defaultProps:{children:"children",label:"name"},allMenu:[],treeLoading:!1,oking:!1}},created:function(){this.getList()},methods:{getList:function(){var e=this;Object(o.f)().then(function(t){0===t.data.code&&(e.tableData=t.data.page.list)})},getAllMenu:function(){var e=this;this.treeLoading=!0,Object(o.d)().then(function(t){e.treeLoading=!1,e.allMenu=Object(r.a)(t.data,"menuId")})},ok:function(){var e=this;console.log(this.$refs.roleTree.getCheckedKeys()),this.oking=!0,"编辑"===this.dialogTitle?Object(o.c)(l()({},this.dialogData,{menuIdList:this.$refs.roleTree.getCheckedKeys()})).then(function(t){e.oking=!1,0===t.data.code?(e.getList(),e.$message({message:"修改成功",type:"success"}),e.dialogFormVisible=!1):e.$message({message:t.data.msg,type:"error"})}).catch(function(){e.oking=!1}):"新增"===this.dialogTitle&&Object(o.a)(l()({},this.dialogData,{menuIdList:this.$refs.roleTree.getCheckedKeys()})).then(function(t){e.oking=!1,0===t.data.code?(e.getList(),e.$message({message:"新增成功",type:"success"}),e.dialogFormVisible=!1):e.$message({message:t.data.msg,type:"error"})}).catch(function(){e.oking=!1})},edit:function(e){var t=this;this.dialogTitle="编辑",this.getAllMenu(),Object(o.e)({roleId:e.roleId}).then(function(e){0===e.data.code&&(t.dialogData=e.data.role)}),this.dialogFormVisible=!0},add:function(){this.getAllMenu(),this.dialogTitle="新增",this.dialogData={},this.dialogFormVisible=!0},search:function(){console.log("submit!")},del:function(e){var t=this;Object(o.b)([e.roleId]).then(function(e){0===e.data.code?(t.getList(),t.$message({message:"删除成功",type:"success"})):t.$message({message:e.data.msg,type:"error"})})},confirmDel:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.del(e)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"role top-border"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchData}},[a("el-form-item",{attrs:{label:"角色名称："}},[a("el-input",{attrs:{placeholder:"角色名称"},model:{value:e.searchData.name,callback:function(t){e.$set(e.searchData,"name",t)},expression:"searchData.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{fixed:"",prop:"roleName",label:"角色名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.confirmDel(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.dialogData,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"角色名称：",prop:"roleName"}},[a("el-input",{model:{value:e.dialogData.roleName,callback:function(t){e.$set(e.dialogData,"roleName",t)},expression:"dialogData.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限设置：",prop:"menuIdList"}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],ref:"roleTree",attrs:{data:e.allMenu,"default-checked-keys":e.dialogData.menuIdList||[],"show-checkbox":"","node-key":"menuId","default-expand-all":"",props:e.defaultProps,"check-strictly":""}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.dialogData.remark,callback:function(t){e.$set(e.dialogData,"remark",t)},expression:"dialogData.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.oking},on:{click:e.ok}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(n,s,!1,function(e){a("6tDn")},"data-v-b95226a4",null);t.default=c.exports}});