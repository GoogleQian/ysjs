webpackJsonp([7,42],{"0YDb":function(t,e){},"6Qob":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("mvHQ"),n=a.n(o),i=a("Dd8w"),l=a.n(i),s=a("8X4s"),r=a("b7JW"),c=a("fKjS"),m=a.n(c),p={components:{RLogin:r.default},data:function(){return{loginInfo:{username:"",password:"",captcha:""},activeName:"1",imgValid:m.a,key:null,camera:null,scene:null,renderer:null,modelContainer:null,_destory:!1,containerMobileStyle:"",formMobileStyle:""}},created:function(){this.refreshImg()},mounted:function(){"phone"===this.$store.state.user.useragent&&(window.onresize=function(){"input"!=document.activeElement.tagName&&"textarea"!=document.activeElement.tagName||setTimeout(function(){var t=document.activeElement.getBoundingClientRect().top;window.scrollTo(0,t)},0)},this.containerMobileStyle="align-items: flex-start",this.formMobileStyle="padding: 10px;margin-top: 10px;")},methods:{handleClick:function(t,e){console.log(t),console.log(this.activeName),"1"===this.activeName?this.refreshImg():"2"===this.activeName&&this.$refs["r-login"].refreshImg()},onSubmit:function(){var t=this;this.loginInfo.key=this.key,Object(s.a)(l()({},this.loginInfo,{captcha:this.loginInfo.captcha&&this.loginInfo.captcha.toLocaleLowerCase()})).then(function(e){0==e.data.ret?(t.$store.commit("setToken",n()(e.data.datas.token)),t.$store.dispatch("setMenus"),localStorage.setItem("token",e.data.datas.token),localStorage.setItem("username",t.loginInfo.username),localStorage.setItem("userId",e.data.datas.userId),localStorage.removeItem("isRepairer"),t.$router.push({path:"/content/dev"})):(t.$message({message:e.data.msg,type:"error"}),t.refreshImg(),t.loginInfo.captcha=null)})},refreshImg:function(){this.key=Math.random(),this.imgValid="/api/access/captcha?key="+this.key}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("div",{staticClass:"container",style:t.containerMobileStyle},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"管理员登录",name:"1"}},[a("el-form",{style:t.formMobileStyle,attrs:{model:t.loginInfo,"label-width":"0"}},[a("el-form-item",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-input",{attrs:{placeholder:"账号"},model:{value:t.loginInfo.username,callback:function(e){t.$set(t.loginInfo,"username",e)},expression:"loginInfo.username"}},[a("i",{staticClass:"el-input__icon icon-yonghu1 iconfont",attrs:{slot:"prefix"},slot:"prefix"})])],1)],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-input",{attrs:{placeholder:"密码",type:"password"},model:{value:t.loginInfo.password,callback:function(e){t.$set(t.loginInfo,"password",e)},expression:"loginInfo.password"}},[a("i",{staticClass:"el-input__icon icon-mima1 iconfont",attrs:{slot:"prefix"},slot:"prefix"})])],1)],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"验证码"},model:{value:t.loginInfo.captcha,callback:function(e){t.$set(t.loginInfo,"captcha",e)},expression:"loginInfo.captcha"}},[a("i",{staticClass:"el-input__icon icon-ad80-copy iconfont",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:10}},[a("img",{staticStyle:{cursor:"pointer"},attrs:{src:t.imgValid,alt:"",width:"112px"},on:{click:t.refreshImg}})]),t._v(" "),a("el-col",{staticStyle:{"text-align":"center",color:"#aaa"},attrs:{span:2}},[a("i",{staticClass:"el-icon-refresh",staticStyle:{cursor:"pointer"},on:{click:t.refreshImg}})])],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("登录")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("p",{staticStyle:{"text-align":"center",color:"#409eff",cursor:"pointer"}},[t._v("忘记密码")])])],1)],1)],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"维修人员登录",name:"2"}},[a("r-login",{ref:"r-login"})],1)],1)],1)])},staticRenderFns:[]};var u=a("VU/8")(p,f,!1,function(t){a("Zlel")},"data-v-d05787c2",null);e.default=u.exports},Zlel:function(t,e){},b7JW:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("Dd8w"),n=a.n(o),i=a("0N3M");var l={data:function(){return{loginInfo:{loginName:"",captcha:"",pwd:""},key:null,containerMobileStyle:"",formMobileStyle:"",imgValid:null}},created:function(){this.refreshImg()},mounted:function(){"phone"===this.$store.state.user.useragent&&(window.onresize=function(){"input"!=document.activeElement.tagName&&"textarea"!=document.activeElement.tagName||setTimeout(function(){var t=document.activeElement.getBoundingClientRect().top;window.scrollTo(0,t)},0)},this.containerMobileStyle="align-items: flex-start",this.formMobileStyle="padding: 10px;margin-top: 10px;")},methods:{onSubmit:function(){var t,e=this;this.loginInfo.key=this.key,(t=n()({},this.loginInfo,{captcha:this.loginInfo.captcha&&this.loginInfo.captcha.toLocaleLowerCase()}),Object(i.a)({url:"/repairers/login",method:"post",data:t})).then(function(t){0==t.data.ret?(localStorage.setItem("token",t.data.datas.token),localStorage.setItem("username",e.loginInfo.loginName),localStorage.setItem("isRepairer",t.data.datas.isRepairer),localStorage.setItem("userId",t.data.datas.userId),e.$router.push({path:"/repair"})):(e.$message({message:t.data.msg,type:"error"}),e.refreshImg(),e.loginInfo.captcha=null)})},refreshImg:function(){console.log("refresh"),this.key=Math.random(),this.imgValid="/api/access/captcha?key="+this.key}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{style:t.formMobileStyle,attrs:{model:t.loginInfo,"label-width":"0"}},[a("el-form-item",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-input",{attrs:{placeholder:"账号"},model:{value:t.loginInfo.loginName,callback:function(e){t.$set(t.loginInfo,"loginName",e)},expression:"loginInfo.loginName"}},[a("i",{staticClass:"el-input__icon icon-yonghu1 iconfont",attrs:{slot:"prefix"},slot:"prefix"})])],1)],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-input",{attrs:{placeholder:"密码",type:"password"},model:{value:t.loginInfo.pwd,callback:function(e){t.$set(t.loginInfo,"pwd",e)},expression:"loginInfo.pwd"}},[a("i",{staticClass:"el-input__icon icon-mima1 iconfont",attrs:{slot:"prefix"},slot:"prefix"})])],1)],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"验证码"},model:{value:t.loginInfo.captcha,callback:function(e){t.$set(t.loginInfo,"captcha",e)},expression:"loginInfo.captcha"}},[a("i",{staticClass:"el-input__icon icon-ad80-copy iconfont",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:10}},[a("img",{staticStyle:{cursor:"pointer"},attrs:{src:t.imgValid,alt:"",width:"112px"},on:{click:t.refreshImg}})]),t._v(" "),a("el-col",{staticStyle:{"text-align":"center",color:"#aaa"},attrs:{span:2}},[a("i",{staticClass:"el-icon-refresh",staticStyle:{cursor:"pointer"},on:{click:t.refreshImg}})])],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("登录")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(l,s,!1,function(t){a("0YDb")},"data-v-39d13eb8",null);e.default=r.exports},fKjS:function(t,e,a){t.exports=a.p+"static/img/imgValid.859eb17.png"}});