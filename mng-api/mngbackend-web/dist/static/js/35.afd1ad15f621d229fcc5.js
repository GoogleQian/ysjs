webpackJsonp([35],{Tyu1:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=t("Dd8w"),i=t.n(l),o=t("VjnB"),s=t("axK0"),r=t("0N3M");var n=[{label:"设备编码",value:"devCode",type:"input",placeholder:"设备编码"},{label:"上报时间",value:"reportTime",type:"datetimerange",placeholder:"上报时间",dateFormat:"yyyy-MM-dd HH:mm:ss"}],d=["修改","删除"],u=[{label:"设备编码",value:"devCode"},{label:"上报人",value:"reportName"},{label:"联系电话",value:"phoneNum"},{label:"具体内容",value:"msg"},{label:"处理状态",value:"status",formatter:function(e){return 0===e.status?"未处理":1===e.status?"已处理":"-"}},{label:"上报时间",value:"reportTime"},{label:"修改时间",value:"updateTime"},{label:"备注",value:"remark"}],c={data:function(){return{tableData:[],page:{total:0,currentPage:1},funcs:d,tableColumns:u,searchItems:n,tableLoading:!1,btnLoading:!1,searchForm:{},dialogTitle:"新增",dialogVisible:!1,labelWidth:"100px",dialogData:{schemalist:[]},allDev:[]}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.tableLoading=!0;var a,t=i()({page:this.page.currentPage},this.searchForm,{repairerId:Number(localStorage.getItem("userId"))});(a=t,Object(r.a)({url:"/complaint/pages",method:"post",data:a})).then(function(a){e.tableLoading=!1,e.tableData=a.data.datas.list,e.page.total=a.data.datas.itemCounts})},search:function(e){console.log(e),this.page.currentPage=1,e.reportTime&&(e.startTime=e.reportTime[0],e.endTime=e.reportTime[1]),this.searchForm=e,delete this.searchForm.reportTime,this.getList()},func:function(e){var a=e.opera,t=e.row;switch(a){case"修改":this.edit(t);break;case"新增":this.add();break;case"删除":this.del(t)}},add:function(){this.dialogTitle="新增",this.dialogData={},this.dialogVisible=!0},edit:function(e){this.dialogTitle="编辑",this.dialogData=i()({},e),this.dialogVisible=!0},del:function(e){var a=this;this.$confirm("此操作将永久删除所选数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t,l;(t={id:e.id},l=t.id,Object(r.a)({url:"/complaint/"+l,method:"delete"})).then(function(e){console.log("shanchu "),a.$message({message:0===e.data.ret?"删除成功":e.data.msg,type:0===e.data.ret?"success":"error"}),a.getList()})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleCurrentChange:function(e){this.page.currentPage=e,this.getList()},submitForm:function(e){var a=this;this.$refs[e].validate(function(e){if(!e)return!1;var t,l,o,s=i()({},a.dialogData,{repairerId:Number(localStorage.getItem("userId"))});"编辑"===a.dialogTitle?(t={id:s.id,data:i()({},s)},l=t.id,o=t.data,Object(r.a)({url:"/complaint/"+l,method:"put",data:o})).then(function(e){0==e.data.ret?(a.$message({message:"修改成功",type:"success"}),a.dialogVisible=!1,a.getList()):a.$message({message:e.data.msg,type:"error"})}):"新增"===a.dialogTitle&&function(e){return Object(r.a)({url:"/complaint/",method:"post",data:e})}(s).then(function(e){0==e.data.ret?(a.$message({message:"新增成功",type:"success"}),a.dialogVisible=!1,a.getList()):a.$message({message:e.data.msg,type:"error"})})})}},components:{ZTable:o.a,ZSearch:s.a}},m={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"box"},[t("z-search",{attrs:{searchItems:e.searchItems},on:{search:e.search}}),e._v(" "),t("z-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{tableData:e.tableData,tableColumns:e.tableColumns,page:e.page,funcs:e.funcs},on:{func:e.func,handleCurrentChange:e.handleCurrentChange}}),e._v(" "),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible},on:{"update:visible":function(a){e.dialogVisible=a}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.dialogData,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"设备编码:",prop:"devCode"}},[t("el-input",{attrs:{disabled:""},model:{value:e.dialogData.devCode,callback:function(a){e.$set(e.dialogData,"devCode",a)},expression:"dialogData.devCode"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"上报人:",prop:"reportName"}},[t("el-input",{attrs:{disabled:""},model:{value:e.dialogData.reportName,callback:function(a){e.$set(e.dialogData,"reportName",a)},expression:"dialogData.reportName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"联系电话:",prop:"phoneNum"}},[t("el-input",{attrs:{disabled:""},model:{value:e.dialogData.phoneNum,callback:function(a){e.$set(e.dialogData,"phoneNum",a)},expression:"dialogData.phoneNum"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"处理状态",prop:"status"}},[t("el-select",{model:{value:e.dialogData.status,callback:function(a){e.$set(e.dialogData,"status",a)},expression:"dialogData.status"}},[t("el-option",{attrs:{label:"已处理",value:1}}),e._v(" "),t("el-option",{attrs:{label:"未处理",value:0}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"具体内容:",prop:"msg"}},[t("el-input",{attrs:{type:"textarea",disabled:""},model:{value:e.dialogData.msg,callback:function(a){e.$set(e.dialogData,"msg",a)},expression:"dialogData.msg"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"上报时间:",prop:"reportTime"}},[t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",disabled:""},model:{value:e.dialogData.reportTime,callback:function(a){e.$set(e.dialogData,"reportTime",a)},expression:"dialogData.reportTime"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.dialogData.remark,callback:function(a){e.$set(e.dialogData,"remark",a)},expression:"dialogData.remark"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(a){e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var g=t("VU/8")(c,m,!1,function(e){t("Xca/")},"data-v-5f2deca4",null);a.default=g.exports},"Xca/":function(e,a){}});